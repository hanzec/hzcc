import os, lit

lit_config.load_config(
        config, os.path.join('${CURRENT_TEST_ROOT}', "lit.cfg.py"))

# test_source_root: The root path where tests are located.
config.test_source_root = os.path.dirname(os.path.abspath(__file__))

# test_exec_root: The root path where tests should be run.
config.test_exec_root = config.test_source_root

config.environment['PYTHON_EXECUTABLE'] = '${Python3_EXECUTABLE}'

binary_root = '${CMAKE_BINARY_DIR}/bin'

# e2e_file_check tools
FileCheck_executable = os.path.join(binary_root, 'FileCheck')
config.substitutions.append(('%FileCheck',FileCheck_executable))
if not lit.util.which(FileCheck_executable):
    lit_config.fatal('Cannot find OutputCheck executable in your PATH')

# compiler executables
mycc_executable = os.path.join(binary_root, 'mycc')
config.substitutions.append(('%mycc',mycc_executable))